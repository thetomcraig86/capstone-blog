{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from'axios';import{useContext,useEffect,useState}from'react';import{useLocation}from'react-router';import{Context}from'../../context/Context';import{Link}from'react-router-dom';import'./singlePost.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function SinglePost(){var location=useLocation();var path=location.pathname.split('/')[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useContext=useContext(Context),user=_useContext.user;useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/posts/'+path);case 2:res=_context.sent;setPost(res.data);case 4:case\"end\":return _context.stop();}}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[path]);var handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return axios.delete(\"/posts/\".concat(post._id),{data:{username:user.username}});case 3:window.location.replace('/');_context2.next=8;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);case 8:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"singlePost\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sPWrapper\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'blogimg.png',alt:\"\",className:\"singlePostImg\"}),/*#__PURE__*/_jsxs(\"h1\",{className:\"sPTitle\",children:[post.title,post.username===(user===null||user===void 0?void 0:user.username)&&/*#__PURE__*/_jsxs(\"div\",{className:\"sPEdit\",children:[/*#__PURE__*/_jsx(Link,{to:\"/update/\".concat(post._id),className:\"link\",children:/*#__PURE__*/_jsx(\"i\",{className:\"sPIcon far fa-edit\"})}),/*#__PURE__*/_jsx(\"i\",{className:\"sPIcon far fa-trash-alt\",onClick:handleDelete})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"infoWrapper\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"sPInfo\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"sPUsername\",children:[\"Author: \",post.username]}),/*#__PURE__*/_jsxs(\"span\",{className:\"sPDate\",children:[\"Posted on: \",new Date(post.createdAt).toDateString()]})]})}),/*#__PURE__*/_jsx(\"p\",{className:\"sPContent\",children:post.content})]})});}","map":{"version":3,"sources":["C:/Users/theto/Documents/GitHub/capstone-blog/client/src/components/singlePost/SinglePost.jsx"],"names":["axios","useContext","useEffect","useState","useLocation","Context","Link","SinglePost","location","path","pathname","split","post","setPost","user","getPost","get","res","data","handleDelete","delete","_id","username","window","replace","process","env","PUBLIC_URL","title","Date","createdAt","toDateString","content"],"mappings":"8fAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,UAAT,CAAqBC,SAArB,CAAgCC,QAAhC,KAAgD,OAAhD,CACA,OAASC,WAAT,KAA4B,cAA5B,CACA,OAASC,OAAT,KAAwB,uBAAxB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,MAAO,kBAAP,C,wFAEA,cAAe,SAASC,CAAAA,UAAT,EAAsB,CACnC,GAAMC,CAAAA,QAAQ,CAAGJ,WAAW,EAA5B,CACA,GAAMK,CAAAA,IAAI,CAAGD,QAAQ,CAACE,QAAT,CAAkBC,KAAlB,CAAwB,GAAxB,EAA6B,CAA7B,CAAb,CACA,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,gBAAiBZ,UAAU,CAACI,OAAD,CAA3B,CAAQS,IAAR,aAAQA,IAAR,CAEAZ,SAAS,CAAC,UAAM,CACd,GAAMa,CAAAA,OAAO,0FAAG,iKACIf,CAAAA,KAAK,CAACgB,GAAN,CAAU,UAAYP,IAAtB,CADJ,QACRQ,GADQ,eAEdJ,OAAO,CAACI,GAAG,CAACC,IAAL,CAAP,CAFc,sDAAH,kBAAPH,CAAAA,OAAO,0CAAb,CAIAA,OAAO,GACR,CANQ,CAMN,CAACN,IAAD,CANM,CAAT,CAQA,GAAMU,CAAAA,YAAY,2FAAG,gLAEXnB,CAAAA,KAAK,CAACoB,MAAN,kBAAuBR,IAAI,CAACS,GAA5B,EAAmC,CACvCH,IAAI,CAAE,CAAEI,QAAQ,CAAER,IAAI,CAACQ,QAAjB,CADiC,CAAnC,CAFW,QAKjBC,MAAM,CAACf,QAAP,CAAgBgB,OAAhB,CAAwB,GAAxB,EALiB,uJAAH,kBAAZL,CAAAA,YAAY,2CAAlB,CASA,mBACE,YAAK,SAAS,CAAC,YAAf,uBACE,aAAK,SAAS,CAAC,WAAf,wBAEI,YAAK,GAAG,CAAEM,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAyB,aAAnC,CAAkD,GAAG,CAAC,EAAtD,CAAyD,SAAS,CAAC,eAAnE,EAFJ,cAIE,YAAI,SAAS,CAAC,SAAd,WACGf,IAAI,CAACgB,KADR,CAEGhB,IAAI,CAACU,QAAL,IAAkBR,IAAlB,SAAkBA,IAAlB,iBAAkBA,IAAI,CAAEQ,QAAxB,gBACC,aAAK,SAAS,CAAC,QAAf,wBACE,KAAC,IAAD,EAAM,EAAE,mBAAaV,IAAI,CAACS,GAAlB,CAAR,CAAiC,SAAS,CAAC,MAA3C,uBACE,UAAG,SAAS,CAAC,oBAAb,EADF,EADF,cAKE,UAAG,SAAS,CAAC,yBAAb,CAAuC,OAAO,CAAEF,YAAhD,EALF,GAHJ,GAJF,cAgBE,YAAK,SAAS,CAAC,aAAf,uBACE,aAAK,SAAS,CAAC,QAAf,wBACE,cAAM,SAAS,CAAC,YAAhB,sBAAsCP,IAAI,CAACU,QAA3C,GADF,cAEE,cAAM,SAAS,CAAC,QAAhB,yBACc,GAAIO,CAAAA,IAAJ,CAASjB,IAAI,CAACkB,SAAd,EAAyBC,YAAzB,EADd,GAFF,GADF,EAhBF,cAyBE,UAAG,SAAS,CAAC,WAAb,UAA0BnB,IAAI,CAACoB,OAA/B,EAzBF,GADF,EADF,CA+BD","sourcesContent":["import axios from 'axios';\r\nimport { useContext, useEffect, useState } from 'react';\r\nimport { useLocation } from 'react-router';\r\nimport { Context } from '../../context/Context';\r\nimport { Link } from 'react-router-dom';\r\nimport './singlePost.css';\r\n\r\nexport default function SinglePost() {\r\n  const location = useLocation();\r\n  const path = location.pathname.split('/')[2];\r\n  const [post, setPost] = useState({});\r\n  const { user } = useContext(Context);\r\n\r\n  useEffect(() => {\r\n    const getPost = async () => {\r\n      const res = await axios.get('/posts/' + path);\r\n      setPost(res.data);\r\n    };\r\n    getPost();\r\n  }, [path]);\r\n\r\n  const handleDelete = async () => {\r\n    try {\r\n      await axios.delete(`/posts/${post._id}`, {\r\n        data: { username: user.username },\r\n      });\r\n      window.location.replace('/');\r\n    } catch (err) {}\r\n  };\r\n\r\n  return (\r\n    <div className='singlePost'>\r\n      <div className='sPWrapper'>\r\n        \r\n          <img src={process.env.PUBLIC_URL + 'blogimg.png'} alt='' className='singlePostImg' />\r\n        \r\n        <h1 className='sPTitle'>\r\n          {post.title}\r\n          {post.username === user?.username && (\r\n            <div className='sPEdit'>\r\n              <Link to={`/update/${post._id}`} className='link'>\r\n                <i className='sPIcon far fa-edit'></i>\r\n              </Link>\r\n\r\n              <i className='sPIcon far fa-trash-alt' onClick={handleDelete}></i>\r\n            </div>\r\n          )}\r\n        </h1>\r\n        <div className='infoWrapper'>\r\n          <div className='sPInfo'>\r\n            <span className='sPUsername'>Author: {post.username}</span>\r\n            <span className='sPDate'>\r\n              Posted on: {new Date(post.createdAt).toDateString()}\r\n            </span>\r\n          </div>\r\n        </div>\r\n\r\n        <p className='sPContent'>{post.content}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useState}from'react';import'./write.css';import axios from\"axios\";import{Context}from\"../../context/Context\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Write(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),content=_useState4[0],setContent=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),file=_useState6[0],setFile=_useState6[1];var _useContext=useContext(Context),user=_useContext.user;var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var newPost,res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:e.preventDefault();newPost={username:user.username,title:title,content:content};_context.prev=2;_context.next=5;return axios.post('/posts',newPost);case 5:res=_context.sent;window.location.assign('/post/'+res.data._id);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](2);console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[2,9]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"write\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"writeImg\",src:process.env.PUBLIC_URL+'blogimg.png',alt:\"blog\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"writeForm\",onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"writeFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"writeIcon fas fa-plus\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:'none'},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Title\",className:\"writeInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"writeFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"Write Blog Here\",type:\"text\",className:\"writeInput writeText\",onChange:function onChange(e){return setContent(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"writeSubmit\",type:\"submit\",children:\"Post\"})]})]});}","map":{"version":3,"sources":["C:/Users/theto/Documents/GitHub/capstone-blog/client/src/pages/write/Write.jsx"],"names":["useContext","useState","axios","Context","Write","title","setTitle","content","setContent","file","setFile","user","handleSubmit","e","preventDefault","newPost","username","post","res","window","location","assign","data","_id","console","log","process","env","PUBLIC_URL","display","target","files","value"],"mappings":"8fAAA,OAASA,UAAT,CAAqBC,QAArB,KAAqC,OAArC,CACA,MAAO,aAAP,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,OAAT,KAAwB,uBAAxB,C,wFAGA,cAAe,SAASC,CAAAA,KAAT,EAAiB,CAC9B,cAA0BH,QAAQ,CAAC,EAAD,CAAlC,wCAAOI,KAAP,eAAcC,QAAd,eACA,eAA8BL,QAAQ,CAAC,EAAD,CAAtC,yCAAOM,OAAP,eAAgBC,UAAhB,eACA,eAAwBP,QAAQ,CAAC,IAAD,CAAhC,yCAAOQ,IAAP,eAAaC,OAAb,eACA,gBAAiBV,UAAU,CAACG,OAAD,CAA3B,CAAQQ,IAAR,aAAQA,IAAR,CAEA,GAAMC,CAAAA,YAAY,0FAAG,iBAAOC,CAAP,kIACnBA,CAAC,CAACC,cAAF,GACMC,OAFa,CAEH,CACdC,QAAQ,CAAEL,IAAI,CAACK,QADD,CAEdX,KAAK,CAALA,KAFc,CAGdE,OAAO,CAAPA,OAHc,CAFG,uCASCL,CAAAA,KAAK,CAACe,IAAN,CAAW,QAAX,CAAqBF,OAArB,CATD,QASXG,GATW,eAWnBC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,CAAuB,SAAWH,GAAG,CAACI,IAAJ,CAASC,GAA3C,EAXmB,+EAafC,OAAO,CAACC,GAAR,cAbe,oEAAH,kBAAZb,CAAAA,YAAY,4CAAlB,CAiBA,mBACE,aAAK,SAAS,CAAC,OAAf,wBAEI,YAAK,SAAS,CAAC,UAAf,CAA0B,GAAG,CAAEc,OAAO,CAACC,GAAR,CAAYC,UAAZ,CAAyB,aAAxD,CAAuE,GAAG,CAAC,MAA3E,EAFJ,cAIE,cAAM,SAAS,CAAC,WAAhB,CAA4B,QAAQ,CAAEhB,YAAtC,wBACE,aAAK,SAAS,CAAC,gBAAf,wBACE,cAAO,OAAO,CAAC,WAAf,uBACE,UAAG,SAAS,CAAC,uBAAb,EADF,EADF,cAIE,cACE,IAAI,CAAC,MADP,CAEE,EAAE,CAAC,WAFL,CAGE,KAAK,CAAE,CAAEiB,OAAO,CAAE,MAAX,CAHT,CAIE,QAAQ,CAAE,kBAAChB,CAAD,QAAOH,CAAAA,OAAO,CAACG,CAAC,CAACiB,MAAF,CAASC,KAAT,CAAe,CAAf,CAAD,CAAd,EAJZ,EAJF,cAUE,cACE,IAAI,CAAC,MADP,CAEE,WAAW,CAAC,OAFd,CAGE,SAAS,CAAC,YAHZ,CAIE,SAAS,CAAE,IAJb,CAKE,QAAQ,CAAE,kBAAAlB,CAAC,QAAEP,CAAAA,QAAQ,CAACO,CAAC,CAACiB,MAAF,CAASE,KAAV,CAAV,EALb,EAVF,GADF,cAmBE,YAAK,SAAS,CAAC,gBAAf,uBACE,iBACE,WAAW,CAAC,iBADd,CAEE,IAAI,CAAC,MAFP,CAGE,SAAS,CAAC,sBAHZ,CAIE,QAAQ,CAAE,kBAAAnB,CAAC,QAAEL,CAAAA,UAAU,CAACK,CAAC,CAACiB,MAAF,CAASE,KAAV,CAAZ,EAJb,EADF,EAnBF,cA2BE,eAAQ,SAAS,CAAC,aAAlB,CAAgC,IAAI,CAAC,QAArC,kBA3BF,GAJF,GADF,CAsCD","sourcesContent":["import { useContext, useState } from 'react';\r\nimport './write.css';\r\nimport axios from \"axios\";\r\nimport { Context } from \"../../context/Context\";\r\n\r\n\r\nexport default function Write() {\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [file, setFile] = useState(null);\r\n  const { user } = useContext(Context);\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    const newPost = {\r\n      username: user.username,\r\n      title,\r\n      content,\r\n    };\r\n\r\n    try {\r\n      const res = await axios.post('/posts', newPost);\r\n      \r\n    window.location.assign('/post/' + res.data._id);\r\n    } catch (err) {\r\n        console.log(err);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className='write'>\r\n      \r\n        <img className='writeImg' src={process.env.PUBLIC_URL + 'blogimg.png'} alt='blog' />\r\n      \r\n      <form className='writeForm' onSubmit={handleSubmit}>\r\n        <div className='writeFormGroup'>\r\n          <label htmlFor='fileInput'>\r\n            <i className='writeIcon fas fa-plus'></i>\r\n          </label>\r\n          <input\r\n            type='file'\r\n            id='fileInput'\r\n            style={{ display: 'none' }}\r\n            onChange={(e) => setFile(e.target.files[0])}\r\n          />\r\n          <input\r\n            type='text'\r\n            placeholder='Title'\r\n            className='writeInput'\r\n            autoFocus={true}\r\n            onChange={e=>setTitle(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='writeFormGroup'>\r\n          <textarea\r\n            placeholder='Write Blog Here'\r\n            type='text'\r\n            className='writeInput writeText'\r\n            onChange={e=>setContent(e.target.value)}\r\n          ></textarea>\r\n        </div>\r\n        <button className='writeSubmit' type='submit'>\r\n          Post\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:/Users/theto/Documents/GitHub/capstone-blog/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import{useContext,useEffect,useState}from'react';import'./update.css';import axios from'axios';import{Context}from'../../context/Context';import{useLocation}from'react-router';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Update(){var location=useLocation();var path=location.pathname.split('/')[2];var _useState=useState({}),_useState2=_slicedToArray(_useState,2),post=_useState2[0],setPost=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),file=_useState4[0],setFile=_useState4[1];var _useContext=useContext(Context),user=_useContext.user;var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),content=_useState8[0],setContent=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),photo=_useState10[0],setPhoto=_useState10[1];/*function setImage(e) {\r\n    var name = e.name;\r\n    setFile(name);\r\n    setPhoto(name);\r\n    console.log(name);\r\n  }*/useEffect(function(){var getPost=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var res;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return axios.get('/posts/'+path);case 2:res=_context.sent;setPost(res.data);setTitle(res.data.title);setContent(res.data.content);setPhoto(res.data.photo);case 7:case\"end\":return _context.stop();}}},_callee);}));return function getPost(){return _ref.apply(this,arguments);};}();getPost();},[path]);var handleUpdate=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e){var updatedPost;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:e.preventDefault();updatedPost={username:user.username,title:title,content:content};_context2.prev=2;_context2.next=5;return axios.put(\"/posts/\"+post._id,updatedPost);case 5:_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](2);console.log(_context2.t0);case 10:window.location.assign('/post/'+path);case 11:case\"end\":return _context2.stop();}}},_callee2,null,[[2,7]]);}));return function handleUpdate(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"update\",children:[/*#__PURE__*/_jsx(\"img\",{src:process.env.PUBLIC_URL+'blogimg.png',alt:\"\",className:\"updateImg\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"updateForm\",onSubmit:handleUpdate,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"updateFormGroup\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"fileInput\",children:/*#__PURE__*/_jsx(\"i\",{className:\"updateIcon fas fa-plus\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",id:\"fileInput\",style:{display:'none'},onChange:function onChange(e){return setFile(e.target.files[0]);}}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:title,className:\"updateInput\",autoFocus:true,onChange:function onChange(e){return setTitle(e.target.value);}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"updateFormGroup\",children:/*#__PURE__*/_jsx(\"textarea\",{value:content,type:\"text\",className:\"updateInput updateText\",onChange:function onChange(e){return setContent(e.target.value);}})}),/*#__PURE__*/_jsx(\"button\",{className:\"updateSubmit\",type:\"submit\",children:\"Update\"})]})]});}","map":{"version":3,"sources":["C:/Users/theto/Documents/GitHub/capstone-blog/client/src/pages/update/Update.jsx"],"names":["useContext","useEffect","useState","axios","Context","useLocation","Update","location","path","pathname","split","post","setPost","file","setFile","user","title","setTitle","content","setContent","photo","setPhoto","getPost","get","res","data","handleUpdate","e","preventDefault","updatedPost","username","put","_id","console","log","window","assign","process","env","PUBLIC_URL","display","target","files","value"],"mappings":"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","sourcesContent":["import { useContext, useEffect, useState } from 'react';\r\nimport './update.css';\r\nimport axios from 'axios';\r\nimport { Context } from '../../context/Context';\r\nimport { useLocation } from 'react-router';\r\n\r\nexport default function Update() {\r\n  const location = useLocation();\r\n  const path = location.pathname.split('/')[2];\r\n  const [post, setPost] = useState({});\r\n  const [file, setFile] = useState(null);\r\n  const { user } = useContext(Context);\r\n  const [title, setTitle] = useState('');\r\n  const [content, setContent] = useState('');\r\n  const [photo, setPhoto] = useState('');\r\n  \r\n\r\n  /*function setImage(e) {\r\n    var name = e.name;\r\n    setFile(name);\r\n    setPhoto(name);\r\n    console.log(name);\r\n  }*/\r\n\r\n  useEffect(() => {\r\n    const getPost = async () => {\r\n      const res = await axios.get('/posts/' + path);\r\n      setPost(res.data);\r\n      setTitle(res.data.title);\r\n      setContent(res.data.content);\r\n      setPhoto(res.data.photo);\r\n    };\r\n    getPost();\r\n  }, [path]);\r\n\r\n  const handleUpdate = async (e) => {\r\n    e.preventDefault();\r\n    const updatedPost = {\r\n      username: user.username,\r\n      title,\r\n      content,\r\n    };\r\n    try {\r\n      await axios.put(\"/posts/\" + post._id, updatedPost);\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n     window.location.assign('/post/' + path);\r\n  };\r\n\r\n  return (\r\n    <div className='update'>\r\n      <img src={process.env.PUBLIC_URL + 'blogimg.png'} alt='' className='updateImg' />\r\n      <form className='updateForm' onSubmit={handleUpdate}>\r\n        <div className='updateFormGroup'>\r\n          <label htmlFor='fileInput'>\r\n            <i className='updateIcon fas fa-plus'></i>\r\n          </label>\r\n          <input\r\n            type='file'\r\n            id='fileInput'\r\n            style={{ display: 'none' }}\r\n            onChange={(e) => setFile(e.target.files[0])}\r\n          />\r\n          <input\r\n            type='text'\r\n            value={title}\r\n            className='updateInput'\r\n            autoFocus={true}\r\n            onChange={(e) => setTitle(e.target.value)}\r\n          />\r\n        </div>\r\n        <div className='updateFormGroup'>\r\n          <textarea\r\n            value={content}\r\n            type='text'\r\n            className='updateInput updateText'\r\n            onChange={(e) => setContent(e.target.value)}\r\n          ></textarea>\r\n        </div>\r\n        <button className='updateSubmit' type='submit'>\r\n          Update\r\n        </button>\r\n      </form>\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}
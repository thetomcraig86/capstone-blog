(this["webpackJsonpcapstone-blog"]=this["webpackJsonpcapstone-blog"]||[]).push([[0],{36:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},68:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){},72:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){"use strict";a.r(t);var s=a(1),n=a.n(s),c=a(28),r=a.n(c),i=a(8),l=a(2),o=function(e,t){switch(t.type){case"LOGIN_START":return{user:null,isFetching:!0,error:!1};case"LOGIN_SUCCESS":return{user:t.payload,isFetching:!1,error:!1};case"LOGIN_FAILURE":return{user:null,isFetching:!1,error:!0};case"LOGOUT":return{user:null,isFetching:!1,error:!1};default:return e}},u=a(0),j={user:JSON.parse(localStorage.getItem("user"))||null,isFetching:!1,error:!1},b=Object(s.createContext)(j),p=function(e){var t=e.children,a=Object(s.useReducer)(o,j),n=Object(l.a)(a,2),c=n[0],r=n[1];return Object(s.useEffect)((function(){localStorage.setItem("user",JSON.stringify(c.user))}),[c.user]),Object(u.jsx)(b.Provider,{value:{user:c.user,isFetching:c.isFetching,error:c.error,dispatch:r},children:t})};a(36);function d(){var e=Object(s.useContext)(b),t=e.user,a=e.dispatch;return Object(u.jsxs)("nav",{className:"navbar navbar-expand-md bg-dark navbar-dark fixed-top",children:[Object(u.jsx)("button",{className:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarContent","aria-controls":"navbarContent","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(u.jsx)("i",{className:"fas fa-bars hamburger"})}),Object(u.jsxs)("div",{className:"collapse navbar-collapse justify-content-between",id:"navbarContent",children:[Object(u.jsxs)("div",{className:"icons",children:[Object(u.jsx)("i",{className:"topIcon fab fa-facebook-square nav-item nav-link"}),Object(u.jsx)("i",{className:"topIcon fab fa-twitter-square nav-item nav-link"}),Object(u.jsx)("i",{className:"topIcon fab fa-instagram-square nav-item nav-link"})]}),Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/",children:"HOME"})}),t&&Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/write",children:"WRITE"})}),Object(u.jsx)("li",{className:"nav-link",onClick:function(){a({type:"LOGOUT"})},children:t&&"LOGOUT"})]}),t?Object(u.jsx)(i.b,{className:"nav-link",to:"/profile",children:Object(u.jsx)("img",{className:"profilePic nav-item",src:"https://images.pexels.com/photos/771742/pexels-photo-771742.jpeg?auto=compress&cs=tinysrgb&dpr=3&h=47&w=79",alt:"profile pic"})}):Object(u.jsxs)("ul",{className:"navbar-nav",children:[Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/login",children:"LOGIN"})}),Object(u.jsx)("li",{className:"nav-item",children:Object(u.jsx)(i.b,{className:"nav-link",to:"/register",children:"REGISTER"})})]})]})]})}var O=a(4),m=a.n(O),x=a(6),h=(a(46),a.p+"static/media/WDUhero.1502a627.png");function f(){return Object(u.jsx)("div",{className:"h-container",children:Object(u.jsx)("img",{src:h,alt:"brand message",className:"hero"})})}a(47);function v(e){var t=e.post;return Object(u.jsx)("div",{className:"col mt-1 mb-1 card-group",children:Object(u.jsxs)("div",{className:"card post",children:[Object(u.jsx)("img",{className:"card-img-top postImg",src:"blogimg.png",alt:""}),Object(u.jsxs)("div",{className:"postInfo",children:[Object(u.jsx)(i.b,{to:"/post/".concat(t._id),className:"link",children:Object(u.jsx)("div",{className:"card-title postTitle",children:t.title})}),Object(u.jsxs)("div",{className:"card-subtitle postUsername",children:["Author: ",t.username]}),Object(u.jsx)("div",{className:"card-subtitle postDate",children:new Date(t.createdAt).toDateString()})]}),Object(u.jsx)("p",{className:"card-text postContent",children:t.content})]})})}a(48);function g(e){var t=e.posts;return Object(u.jsx)("div",{className:"row row-cols-1 row-cols-md-2 posts",children:t.map((function(e){return Object(u.jsx)(v,{post:e},e._id)}))})}a(49);var N=a(7),w=a.n(N);function y(){var e=Object(s.useState)([]),t=Object(l.a)(e,2),a=t[0],n=t[1];return Object(s.useEffect)((function(){var e=function(){var e=Object(x.a)(m.a.mark((function e(){var t;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.get("/posts");case 2:t=e.sent,n(t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]),Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(f,{}),Object(u.jsx)("div",{className:"home",children:Object(u.jsx)(g,{posts:a})})]})}var I=a(3);a(68);function S(){var e=Object(I.f)().pathname.split("/")[2],t=Object(s.useState)({}),a=Object(l.a)(t,2),n=a[0],c=a[1],r=Object(s.useContext)(b).user;Object(s.useEffect)((function(){var t=function(){var t=Object(x.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/posts/"+e);case 2:a=t.sent,c(a.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var o=function(){var e=Object(x.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,w.a.delete("/posts/".concat(n._id),{data:{username:r.username}});case 3:window.location.replace("/"),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return Object(u.jsx)("div",{className:"singlePost",children:Object(u.jsxs)("div",{className:"sPWrapper",children:[Object(u.jsx)("img",{src:"blogimg.png",alt:"",className:"singlePostImg"}),Object(u.jsxs)("h1",{className:"sPTitle",children:[n.title,n.username===(null===r||void 0===r?void 0:r.username)&&Object(u.jsxs)("div",{className:"sPEdit",children:[Object(u.jsx)(i.b,{to:"/update/".concat(n._id),className:"link",children:Object(u.jsx)("i",{className:"sPIcon far fa-edit"})}),Object(u.jsx)("i",{className:"sPIcon far fa-trash-alt",onClick:o})]})]}),Object(u.jsx)("div",{className:"infoWrapper",children:Object(u.jsxs)("div",{className:"sPInfo",children:[Object(u.jsxs)("span",{className:"sPUsername",children:["Author: ",n.username]}),Object(u.jsxs)("span",{className:"sPDate",children:["Posted on: ",new Date(n.createdAt).toDateString()]})]})}),Object(u.jsx)("p",{className:"sPContent",children:n.content})]})})}a(69);function k(){return Object(u.jsx)("div",{className:"single",children:Object(u.jsx)(S,{})})}a(70);function C(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],j=Object(s.useState)(null),p=Object(l.a)(j,2),d=(p[0],p[1]),O=Object(s.useContext)(b).user,h=function(){var e=Object(x.a)(m.a.mark((function e(t){var s,n;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),s={username:O.username,title:a,content:i},e.prev=2,e.next=5,w.a.post("/posts",s);case 5:n=e.sent,window.location.assign("/post/"+n.data._id),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"write",children:[Object(u.jsx)("img",{className:"writeImg",src:"blogimg.png",alt:"blog"}),Object(u.jsxs)("form",{className:"writeForm",onSubmit:h,children:[Object(u.jsxs)("div",{className:"writeFormGroup",children:[Object(u.jsx)("label",{htmlFor:"fileInput",children:Object(u.jsx)("i",{className:"writeIcon fas fa-plus"})}),Object(u.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return d(e.target.files[0])}}),Object(u.jsx)("input",{type:"text",placeholder:"Title",className:"writeInput",autoFocus:!0,onChange:function(e){return n(e.target.value)}})]}),Object(u.jsx)("div",{className:"writeFormGroup",children:Object(u.jsx)("textarea",{placeholder:"Write Blog Here",type:"text",className:"writeInput writeText",onChange:function(e){return o(e.target.value)}})}),Object(u.jsx)("button",{className:"writeSubmit",type:"submit",children:"Post"})]})]})}a(71);function P(){var e=Object(I.f)().pathname.split("/")[2],t=Object(s.useState)({}),a=Object(l.a)(t,2),n=a[0],c=a[1],r=Object(s.useState)(null),i=Object(l.a)(r,2),o=(i[0],i[1]),j=Object(s.useContext)(b).user,p=Object(s.useState)(""),d=Object(l.a)(p,2),O=d[0],h=d[1],f=Object(s.useState)(""),v=Object(l.a)(f,2),g=v[0],N=v[1],y=Object(s.useState)(""),S=Object(l.a)(y,2),k=(S[0],S[1]);Object(s.useEffect)((function(){var t=function(){var t=Object(x.a)(m.a.mark((function t(){var a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,w.a.get("/posts/"+e);case 2:a=t.sent,c(a.data),h(a.data.title),N(a.data.content),k(a.data.photo);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[e]);var C=function(){var t=Object(x.a)(m.a.mark((function t(a){var s;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a.preventDefault(),s={username:j.username,title:O,content:g},t.prev=2,t.next=5,w.a.put("/posts/"+n._id,s);case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(2),console.log(t.t0);case 10:window.location.assign("/post/"+e);case 11:case"end":return t.stop()}}),t,null,[[2,7]])})));return function(e){return t.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"update",children:[Object(u.jsx)("img",{src:"blogimg.png",alt:"",className:"updateImg"}),Object(u.jsxs)("form",{className:"updateForm",onSubmit:C,children:[Object(u.jsxs)("div",{className:"updateFormGroup",children:[Object(u.jsx)("label",{htmlFor:"fileInput",children:Object(u.jsx)("i",{className:"updateIcon fas fa-plus"})}),Object(u.jsx)("input",{type:"file",id:"fileInput",style:{display:"none"},onChange:function(e){return o(e.target.files[0])}}),Object(u.jsx)("input",{type:"text",value:O,className:"updateInput",autoFocus:!0,onChange:function(e){return h(e.target.value)}})]}),Object(u.jsx)("div",{className:"updateFormGroup",children:Object(u.jsx)("textarea",{value:g,type:"text",className:"updateInput updateText",onChange:function(e){return N(e.target.value)}})}),Object(u.jsx)("button",{className:"updateSubmit",type:"submit",children:"Update"})]})]})}a(72);function F(){var e=Object(s.useRef)(),t=Object(s.useRef)(),a=Object(s.useContext)(b),n=a.dispatch,c=a.isFetching,r=function(){var a=Object(x.a)(m.a.mark((function a(s){var c;return m.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return s.preventDefault(),n({type:"LOGIN_START"}),a.prev=2,a.next=5,w.a.post("/auth/login",{username:e.current.value,password:t.current.value});case 5:c=a.sent,n({type:"LOGIN_SUCCESS",payload:c.data}),a.next=12;break;case 9:a.prev=9,a.t0=a.catch(2),n({type:"LOGIN_FAILURE"});case 12:case"end":return a.stop()}}),a,null,[[2,9]])})));return function(e){return a.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"login",children:[Object(u.jsx)("span",{className:"loginTitle",children:"Login"}),Object(u.jsxs)("form",{className:"loginForm",onSubmit:r,children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("input",{className:"loginInput",type:"text",placeholder:"Enter your username...",ref:e}),Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{className:"loginInput",type:"password",placeholder:"Enter your password...",ref:t}),Object(u.jsx)("button",{className:"loginButton",type:"submit",disabled:c,children:"Login"})]}),Object(u.jsx)("div",{className:"msg",children:"Not Registered? Click below to get started!"}),Object(u.jsx)("button",{className:"loginRegisterButton",children:Object(u.jsx)(i.b,{className:"link",to:"/register",children:"Register"})})]})}a(73);function E(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(l.a)(c,2),o=r[0],j=r[1],b=Object(s.useState)(""),p=Object(l.a)(b,2),d=p[0],O=p[1],h=Object(s.useState)(!1),f=Object(l.a)(h,2),v=f[0],g=f[1],N=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),g(!1),e.prev=2,e.next=5,w.a.post("/auth/register",{username:a,email:o,password:d});case 5:e.sent.data&&window.location.replace("/login"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),g(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"register",children:[Object(u.jsx)("span",{className:"registerTitle",children:"Register"}),Object(u.jsxs)("form",{className:"registerForm",onSubmit:N,children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("input",{className:"registerInput",type:"text",placeholder:"Enter your username...",onChange:function(e){return n(e.target.value)}}),Object(u.jsx)("label",{children:"Email"}),Object(u.jsx)("input",{className:"registerInput",type:"text",placeholder:"Enter your email...",onChange:function(e){return j(e.target.value)}}),Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{className:"registerInput",type:"password",placeholder:"Enter your password...",onChange:function(e){return O(e.target.value)}}),Object(u.jsx)("button",{className:"registerButton",type:"submit",children:"Register"})]}),Object(u.jsx)("div",{className:"msg",children:"Already Registered? Click Below to Login"}),Object(u.jsx)("button",{className:"registerLoginButton",children:Object(u.jsx)(i.b,{className:"link",to:"/login",children:"Login"})}),v&&Object(u.jsx)("span",{children:"Didn't Work..."})]})}a(74);function T(){var e=Object(s.useState)(""),t=Object(l.a)(e,2),a=t[0],n=t[1],c=Object(s.useState)(""),r=Object(l.a)(c,2),i=r[0],o=r[1],j=Object(s.useState)(""),b=Object(l.a)(j,2),p=b[0],d=b[1],O=Object(s.useState)(!1),h=Object(l.a)(O,2),f=h[0],v=h[1],g=function(){var e=Object(x.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),v(!1),e.prev=2,e.next=5,w.a.put("/auth/update",{username:a,email:i,password:p});case 5:e.sent.data&&window.location.replace("/"),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),v(!0);case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("div",{className:"updateP",children:[Object(u.jsx)("span",{className:"updatePTitle",children:"Update Profile"}),Object(u.jsxs)("form",{className:"updatePForm",onSubmit:g,children:[Object(u.jsx)("label",{children:"Username"}),Object(u.jsx)("input",{className:"updatePInput",type:"text",placeholder:"Enter new username...",onChange:function(e){return n(e.target.value)}}),Object(u.jsx)("label",{children:"Email"}),Object(u.jsx)("input",{className:"updatePInput",type:"text",placeholder:"Enter new email...",onChange:function(e){return o(e.target.value)}}),Object(u.jsx)("label",{children:"Password"}),Object(u.jsx)("input",{className:"updatePInput",type:"password",placeholder:"Enter new password...",onChange:function(e){return d(e.target.value)}}),Object(u.jsx)("button",{className:"updatePButton",type:"submit",children:"Update"})]}),f&&Object(u.jsx)("span",{children:"Didn't Work..."})]})}a(75);function L(){return Object(u.jsx)("div",{className:"myFooter",children:Object(u.jsx)("span",{id:"copy",children:"\xa9 Copyright Tom Craig 2021  "})})}var R=function(){var e=Object(s.useContext)(b).user;return Object(u.jsxs)(i.a,{children:[Object(u.jsx)(d,{}),Object(u.jsxs)(I.c,{children:[Object(u.jsx)(I.a,{exact:!0,path:"/",children:Object(u.jsx)(y,{})}),Object(u.jsx)(I.a,{path:"/post/:postId",children:Object(u.jsx)(k,{})}),Object(u.jsx)(I.a,{path:"/write",children:e?Object(u.jsx)(C,{}):Object(u.jsx)(F,{})}),Object(u.jsx)(I.a,{path:"/login",children:e?Object(u.jsx)(y,{}):Object(u.jsx)(F,{})}),Object(u.jsx)(I.a,{path:"/register",children:e?Object(u.jsx)(y,{}):Object(u.jsx)(E,{})}),Object(u.jsx)(I.a,{path:"/update/:postId",children:Object(u.jsx)(P,{})}),Object(u.jsx)(I.a,{path:"/profile",children:Object(u.jsx)(T,{})})]}),Object(u.jsx)(L,{})]})};r.a.render(Object(u.jsx)(n.a.StrictMode,{children:Object(u.jsx)(p,{children:Object(u.jsx)(R,{})})}),document.getElementById("root"))}},[[76,1,2]]]);
//# sourceMappingURL=main.1191d7ac.chunk.js.map